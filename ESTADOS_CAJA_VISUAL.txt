â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          ESTADOS DE CAJA PARA USUARIO                          â•‘
â•‘                           3 Estados Bien Definidos                             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ESTADO 1: SIN ABRIR âš ï¸
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Visual:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mi Caja del DÃ­a          âš ï¸ Sin abrir         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                               â”‚
â”‚                    ğŸ’°                         â”‚
â”‚         No tienes caja abierta                â”‚
â”‚      Debes abrir una caja para                â”‚
â”‚      comenzar a trabajar.                     â”‚
â”‚                                               â”‚
â”‚         [ğŸ’° Abrir Caja]                       â”‚
â”‚                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CondiciÃ³n:
  â€¢ No existe AperturaCaja para hoy
  â€¢ Usuario NO abriÃ³ caja

Color:
  â€¢ ğŸ”´ ROJO (Advertencia)

Acciones:
  âœ… Abrir Caja â†’ Abre modal

Restricciones:
  âŒ NO puede convertir con ANTICIPADO_100
  âŒ NO puede convertir con MEDIO_MEDIO
  âœ… PUEDE convertir con CONTRA_ENTREGA
  âœ… PUEDE convertir con CREDITO

DuraciÃ³n:
  â€¢ Toda la maÃ±ana hasta que abra
  â€¢ TÃ­picamente: 09:00 - 09:30

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ESTADO 2: ABIERTA âœ…
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Visual:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mi Caja del DÃ­a                          âœ… Abierta          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚ Caja: Caja Principal                                          â”‚
â”‚ UbicaciÃ³n: Mostrador 1                                        â”‚
â”‚ Hora de Apertura: ğŸ• 09:30                                    â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚ Monto Inicial:        Bs. 500.00                   â”‚        â”‚
â”‚ â”‚ Movimientos del DÃ­a:  Bs. 1,250.00                 â”‚        â”‚
â”‚ â”‚ Total Esperado:       Bs. 1,750.00                 â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                               â”‚
â”‚             [ğŸ”’ Cerrar Caja]                                  â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CondiciÃ³n:
  â€¢ Existe AperturaCaja para hoy
  â€¢ NO existe CierreCaja para esa apertura
  â€¢ Usuario TIENE caja abierta

Color:
  â€¢ ğŸŸ¢ VERDE (Activo)

InformaciÃ³n:
  âœ… Nombre de caja
  âœ… UbicaciÃ³n
  âœ… Hora de apertura
  âœ… Monto inicial
  âœ… Movimientos registrados
  âœ… Total esperado

Acciones:
  âœ… Cerrar Caja â†’ Abre modal para cierre
  âœ… Convertir proformas (cualquier polÃ­tica)
  âœ… Registrar movimientos

Restricciones:
  âŒ NO puede abrir otra caja
  âŒ NO puede saltar este estado

DuraciÃ³n:
  â€¢ TÃ­picamente: 09:30 - 17:45
  â€¢ Promedio: 7-8 horas
  â€¢ MÃ¡ximo: Hasta fin del dÃ­a (23:59)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ESTADO 3: CERRADA âŒ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Visual:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Mi Caja del DÃ­a                          âŒ Cerrada          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                               â”‚
â”‚ Caja: Caja Principal                                          â”‚
â”‚ UbicaciÃ³n: Mostrador 1                                        â”‚
â”‚ Hora de Apertura: ğŸ• 09:30                                    â”‚
â”‚                                                               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
â”‚ â”‚ Monto Inicial:        Bs. 500.00                   â”‚        â”‚
â”‚ â”‚ Movimientos del DÃ­a:  Bs. 1,250.00                 â”‚        â”‚
â”‚ â”‚ Total Esperado:       Bs. 1,750.00                 â”‚        â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
â”‚                                                               â”‚
â”‚   Caja cerrada a las ğŸ• 17:45                                â”‚
â”‚   Diferencia: Bs. 50.00 âœ… (Sobrante)                         â”‚
â”‚                                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

CondiciÃ³n:
  â€¢ Existe AperturaCaja para hoy
  â€¢ EXISTE CierreCaja para esa apertura
  â€¢ Usuario CERRÃ“ la caja

Color:
  â€¢ âš« GRIS (Inactivo)

InformaciÃ³n Adicional:
  âœ… Hora de cierre
  âœ… Diferencia (esperado vs real)
     - ğŸŸ¢ Verde si > 0 (sobrante)
     - ğŸ”´ Rojo si < 0 (faltante)

Acciones:
  âŒ NO puede cerrar de nuevo
  âŒ NO puede abrir nueva caja
  âŒ NO puede registrar movimientos
  âœ… Solo lectura de informaciÃ³n

Restricciones:
  âŒ NO puede convertir proformas
  âŒ NO puede hacer cambios

DuraciÃ³n:
  â€¢ Desde cierre hasta fin del dÃ­a
  â€¢ TÃ­picamente: 17:45 - 23:59
  â€¢ MÃ¡ximo: 6 horas
  â€¢ MaÃ±ana: vuelve a SIN ABRIR

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FLUJO DE ESTADOS EN EL DÃA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

09:00 AM
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SIN ABRIR âš ï¸   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚ usuario abre caja
         â”‚ POST /cajas/abrir
         â†“
09:05 AM
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ABIERTA âœ…    â”‚ â† Usuario trabaja 8 horas
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
    Realiza trabajo:
    â€¢ Convierte proformas
    â€¢ Registra movimientos
    â€¢ Acumula dinero
         â”‚
    17:45 PM â† Usuario decide cerrar
         â”‚ usuario cierra caja
         â”‚ POST /cajas/cerrar
         â†“
17:50 PM
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   CERRADA âŒ    â”‚ â† Solo lectura
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
      23:59 PM â† Fin del dÃ­a
         â”‚
    (Siguiente dÃ­a)
         â†“
09:00 AM
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  SIN ABRIR âš ï¸   â”‚ â† Vuelve a empezar
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

TABLA COMPARATIVA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ CaracterÃ­stica         â”‚ SIN ABRIR    â”‚ ABIERTA      â”‚ CERRADA      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Visual                 â”‚ âš ï¸ Rojo      â”‚ âœ… Verde     â”‚ âŒ Gris      â”‚
â”‚ Existe Apertura        â”‚ âŒ NO        â”‚ âœ… SÃ        â”‚ âœ… SÃ        â”‚
â”‚ Existe Cierre          â”‚ N/A          â”‚ âŒ NO        â”‚ âœ… SÃ        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Abrir Caja             â”‚ âœ… SÃ        â”‚ âŒ NO        â”‚ âŒ NO        â”‚
â”‚ Cerrar Caja            â”‚ âŒ NO        â”‚ âœ… SÃ        â”‚ âŒ NO        â”‚
â”‚ Convertir ANTICIPADO   â”‚ âŒ BLOQUEA   â”‚ âœ… SÃ        â”‚ âŒ BLOQUEA   â”‚
â”‚ Convertir MEDIO_MEDIO  â”‚ âŒ BLOQUEA   â”‚ âœ… SÃ        â”‚ âŒ BLOQUEA   â”‚
â”‚ Convertir CONTRA_ENTA. â”‚ âœ… SÃ        â”‚ âœ… SÃ        â”‚ âŒ NO        â”‚
â”‚ Convertir CREDITO      â”‚ âœ… SÃ        â”‚ âœ… SÃ        â”‚ âŒ NO        â”‚
â”‚ Registrar movimientos  â”‚ âŒ NO        â”‚ âœ… SÃ        â”‚ âŒ NO        â”‚
â”‚ Ver informaciÃ³n        â”‚ Mensaje      â”‚ Completa     â”‚ Completa     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ DuraciÃ³n tÃ­pica        â”‚ 30 min       â”‚ 8 horas      â”‚ 6 horas      â”‚
â”‚ Momento del dÃ­a        â”‚ 09:00-09:30  â”‚ 09:30-17:45  â”‚ 17:45-23:59  â”‚
â”‚ Ocurre por dÃ­a         â”‚ 1 vez        â”‚ 1 vez        â”‚ 1 vez        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

REGLAS DE NEGOCIO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

REGLA 1: Solo 1 Caja por Usuario por DÃ­a
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Si estado = ABIERTA:
    â””â”€ Usuario SOLO puede cerrar
    â””â”€ NO puede abrir otra caja

  Si estado = CERRADA:
    â””â”€ Usuario NO puede hacer nada hoy
    â””â”€ MaÃ±ana puede abrir nueva caja (si existe siguiente dÃ­a)

  Si estado = SIN ABRIR:
    â””â”€ Usuario DEBE abrir antes de trabajar

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

REGLA 2: ConversiÃ³n SegÃºn PolÃ­tica
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

  ANTICIPADO_100 | MEDIO_MEDIO:
    â”œâ”€ SIN ABRIR â†’ âŒ BLOQUEA (Error HTTP 422)
    â”‚              Message: "Abra una caja primero"
    â”œâ”€ ABIERTA â†’ âœ… PERMITIDO
    â”‚           â””â”€ Registra en MovimientoCaja
    â””â”€ CERRADA â†’ âŒ BLOQUEA (ya no se puede operar)

  CONTRA_ENTREGA | CREDITO:
    â”œâ”€ SIN ABRIR â†’ âœ… PERMITIDO (se paga despuÃ©s)
    â”œâ”€ ABIERTA â†’ âœ… PERMITIDO
    â””â”€ CERRADA â†’ âŒ BLOQUEA (ya no se puede operar)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

REGLA 3: DuraciÃ³n Diaria
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  â€¢ Cada caja tiene mÃ¡ximo 1 dÃ­a de vida
  â€¢ ABIERTA desde apertura hasta cierre (7-8 horas tÃ­pico)
  â€¢ CERRADA desde cierre hasta fin de dÃ­a (23:59)
  â€¢ MaÃ±ana: vuelve a SIN ABRIR automÃ¡ticamente

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EJEMPLOS DE ESTADOS EN TIEMPO REAL
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EJEMPLO 1: DÃ­a Normal
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  09:00 - Usuario login
          â†’ Estado: SIN ABRIR âš ï¸

  09:10 - Usuario abre caja
          â†’ Estado: ABIERTA âœ…
          â†’ Monto inicial: Bs. 500

  09:30 a 17:30 - Trabaja
          â†’ Convierte 20 proformas
          â†’ Total movimientos: Bs. 1,250

  17:45 - Usuario cierra caja
          â†’ Estado: CERRADA âŒ
          â†’ Monto contado: Bs. 1,750
          â†’ Diferencia: Bs. 0 âœ… (Perfecto)

  Siguiente dÃ­a 09:00 - Login
          â†’ Estado: SIN ABRIR âš ï¸ (Nueva caja)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EJEMPLO 2: Usuario Olvida Abrir
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  09:00 - Usuario login
          â†’ Estado: SIN ABRIR âš ï¸

  09:15 - Intenta convertir proforma ANTICIPADO_100
          â†’ POST /api/proformas/{id}/convertir-venta
          â†’ âŒ HTTP 422 ERROR
             "No puede convertir sin caja abierta"

  09:20 - Usuario abre caja
          â†’ Estado: ABIERTA âœ…

  09:25 - Reintentar conversiÃ³n
          â†’ âœ… HTTP 201 SUCCESS
          â†’ Venta creada
          â†’ MovimientoCaja registrado

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

EJEMPLO 3: Usuario Desconecta Sin Cerrar
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  09:00 - Usuario login
          â†’ Estado: SIN ABRIR âš ï¸

  09:10 - Abre caja
          â†’ Estado: ABIERTA âœ…

  17:00 - Usuario se desconecta (sin cerrar caja)
          â†’ Estado: ABIERTA âœ… (TODAVÃA)

  18:00 a 23:59 - Caja abierta sin operaciones
          â†’ Estado: ABIERTA âœ…
          â†’ PROBLEMA: Cajas sin reconciliar

  Siguiente dÃ­a 09:00 - Usuario login
          â†’ Estado: ABIERTA âœ… (TODAVÃA - ayer)
          â†’ Muestra apertura de ayer

  09:05 - Usuario cierra caja de ayer
          â†’ Estado: CERRADA âŒ (de ayer)

  09:06 - Abre nueva caja de hoy
          â†’ Estado: ABIERTA âœ… (HOY)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

RESUMEN VISUAL DE COMPONENTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Archivo: resources/js/presentation/pages/Cajas/components/caja-estado-card.tsx

â”Œâ”€ PROPS â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ cajaAbiertaHoy: AperturaCaja | null â”‚ â† Valor clave
â”‚ totalMovimientos: number            â”‚
â”‚ onAbrirClick: () => void            â”‚
â”‚ onCerrarClick: () => void           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

LÃ³gica Interna:
  if (!cajaAbiertaHoy) {
    // SIN ABRIR
  } else if (!cajaAbiertaHoy.cierre) {
    // ABIERTA
  } else {
    // CERRADA
  }

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… CONCLUSIÃ“N

Usuario ve **3 estados claramente definidos**:

1. âš ï¸ **SIN ABRIR** - Necesita abrir caja para trabajar
2. âœ… **ABIERTA** - Puede trabajar, convertir, registrar movimientos
3. âŒ **CERRADA** - Fin del dÃ­a, solo lectura

Cada estado tiene:
  âœ… Visual diferente (color, icono)
  âœ… InformaciÃ³n especÃ­fica
  âœ… Acciones permitidas/bloqueadas
  âœ… DuraciÃ³n clara en el dÃ­a

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Ãšltima actualizaciÃ³n: 2026-01-21
Status: âœ… Completamente documentado
